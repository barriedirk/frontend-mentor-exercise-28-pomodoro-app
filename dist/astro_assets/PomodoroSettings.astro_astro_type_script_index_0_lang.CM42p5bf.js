import{g as B,a as S,s,b as D,o as P,l as I,r as $}from"./PomodoroStore.B3yVr2Vj.js";(async()=>{const r=document.getElementById("btnPomodoroSettings"),a=r.querySelector(".settings"),u=document.getElementById("btnCloseDialog"),n=document.getElementById("modal-dialog"),f=document.getElementById("fs__submit"),{timePomodoro:g,timeShortBreak:p,timeLongBreak:y,font:v,color:b}=B();S(async e=>{const{font:l,color:t,letterSpacing:d}=e.getState();document.body.style.setProperty("--clr-pomodoro",`var(${t})`),document.body.style.setProperty("--ff-pomodoro",`var(${l})`),document.body.style.setProperty("--ls-pomodoro",`var(${d})`)}),s(".pomodoro-settings input[name='timePomodoro']","value",g),s(".pomodoro-settings input[name='timeLongBreak']","value",y),s(".pomodoro-settings input[name='timeShortBreak']","value",p),s(`.pomodoro-settings input[name="font"][value="${v}"]`,"checked",!0),s(`.pomodoro-settings input[name="color"][value="${b}"]`,"checked",!0),D('.form-settings__color input[type="radio"], .form-settings__font input[type="radio"]',".form-settings__color .fs__group label, .form-settings__font .fs__group label"),P('#form-settings input[type="number"]'),f.addEventListener("click",e=>{e.preventDefault();const l=document.getElementById("form-settings"),t=new FormData(l),d=t.get("timePomodoro"),k=t.get("timeShortBreak"),L=t.get("timeLongBreak"),E=t.get("color"),_=t.get("font");if([d,k,L].map(o=>Number(o)).some(o=>!o||isNaN(o)||o<1)){alert("Please enter a valid number (1 or more) for all time settings.");return}if(!_||!E){alert("Please enter a valid font and/or color for all time settings.");return}let i={};for(const[o,h]of t)i[o]=h;i.letterSpacing=i.font==="--ff-space"?"--ls--10":"--ls-0",I(i),$(),n.close()});let c=null;r.addEventListener("click",e=>{e.preventDefault(),c=document.activeElement,n.showModal(),n.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus()}),u.addEventListener("click",e=>{e.preventDefault(),n.close(),c?.focus()}),n.addEventListener("keydown",e=>{e.key==="Escape"&&(e.preventDefault(),n.close(),c?.focus())});let m=!1;r.addEventListener("touchstart",()=>{m||(a.classList.add("rotating","jelly"),setTimeout(()=>{a.classList.remove("rotating","jelly")},500),m=!0,setTimeout(()=>m=!1,600))}),r.addEventListener("mouseenter",()=>{a.classList.add("jelly"),setTimeout(()=>a.classList.remove("jelly"),500)})})();
