import{d as N,g as b,a as B,p as u,e as v,f as K,P as l,h as E,j as $,r as C,S as p,k as V,u as z,c as U}from"./PomodoroStore.B3yVr2Vj.js";const A=document.querySelector(".pomodoro-timer"),w=A.getAttribute("data-base")??"/";let c;N(w).then(s=>{c=s,console.log("Sounds loaded and ready")}).catch(s=>{console.error("Failed to load sounds:",s)});(async()=>{let{pomodoroMode:s,timeRemaining:r,totalDuration:t,isRunning:d}=b();const S=e=>{e===l.POMODORO?A.classList.remove("pomodoro-pause"):A.classList.add("pomodoro-pause")};S(s);const m=e=>{const a=$[e].time;return a?Number(b()[a]):-1},D=document.querySelector(".progress-dot");function x(e){const a=e/100*360-180,i=parseFloat(getComputedStyle(T).getPropertyValue("--size"))||300,y=D.offsetWidth||12,f=i/2-y/2;D.style.transform=`
          translate(-50%, -50%)
          rotate(${a}deg)
          translateY(${f}px)`}const I=document.querySelector(".pomodoro-reset-btn"),o=document.querySelector(".pomodoro-timer-btn"),R=document.querySelector(".pomodoro-timer"),T=R.querySelector(".pomodoro-progress"),L=R.querySelector(".pomodoro-display");let n;const F=(e=!1)=>{o.setAttribute("aria-pressed","false"),o.innerText="Pause",e&&clearInterval(n)},_=(e=!1)=>{o.setAttribute("aria-pressed","false"),o.innerText="Resume",e&&clearInterval(n)},g=()=>{o.setAttribute("aria-pressed","false"),o.innerText="Start",clearInterval(n),t=m(l.POMODORO)*60,r=t,d=!1,O(r,t),C()},P=(e=!1)=>{o.setAttribute("aria-pressed","false"),o.innerText="Start",e&&clearInterval(n)},M=(e=!1)=>{o.setAttribute("aria-pressed","true"),o.innerText="Pause",n&&clearInterval(n),e&&(n=q())},O=(e,a)=>{const i=(a-e)/a*100,y=Math.floor(e/60),f=e%60;L.textContent=e<=0?"00:00":`${y}:${f<10?"0":""}${f}`,x(i),T&&T.style.setProperty("--progress",i.toFixed(2))};B(async e=>{let{pomodoroMode:a,totalDuration:i}=e.getState();(s!==a||t!==i)&&(t=m(s)*60,r=t,d=!1,n&&clearInterval(n),s=a,S(s),O(r,t),E({totalDuration:t,timeRemaining:r,isRunning:d}))}),o.setAttribute("aria-pressed","false"),d===!1?(t=m(s)*60,r=t,P(!0)):F(!0),O(r,t);const h=e=>{t=m(e)*60,r=t,M(!0),z({pomodoroMode:e}),U(),v({totalDuration:t,timeRemaining:r})},k=()=>{let{countPomodoro:e}=b();switch(s){case l.POMODORO:e<V?s=l.SHORT_BREAK:s=l.LONG_BREAK,u(c,p.BREAK);break;case l.SHORT_BREAK:s=l.POMODORO,u(c,p.START);break;case l.LONG_BREAK:g(),u(c,p.END);return}h(s),S(s)},q=()=>setInterval(()=>{r--,O(r,t),r<=0&&(clearInterval(n),k()),E({totalDuration:t,timeRemaining:r,isRunning:d})},1e3);I.addEventListener("click",e=>{e.preventDefault(),g()}),o.addEventListener("click",e=>{switch(e.preventDefault(),o.getAttribute("aria-pressed")==="true"){case!0:r>0?_(!0):(r=t,P(!0)),u(c,p.PAUSE),K();break;case!1:r<=0?P(!0):M(!0),u(c,p.START),v({totalDuration:t,timeRemaining:r});break}})})();
